<CustButton@Button>:
    background_normal: ''
    background_color: .1, .2, .3, .85
    font_size: 30

<TopButton@Button>:
    background_normal: ''
    background_color: .1, .2, .3, .85
    font_size: 20
    size_hint: .3, .2

<VertLayout@BoxLayout>:
    spacing: 10
    orientation: 'vertical'

<HorLayout@BoxLayout>:
    spacing: 10
    orientation: 'horizontal'

MyScreenManager:
    IntroScreen:
    WelcomeScreen:

<IntroScreen>:
    name: 'intro'
    VertLayout:
        Label:
            text: "Generateur d'Histoire!"
            font_size: 30
        Spinner:
            background_normal: ''
            background_color: .2, .3, .4, .85
            text: "Choisis Ton Theme"
            font_size: 30
            values: ["AVENGERS", "PRINCESSES", "HARRY POTTER", "SHOWBIZ"]
            id: theme
            on_text: root.spinner_clicked(theme.text)
        CustButton:
            text: 'Commence A Generer Ton Histoire!'
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.transition.duration = 1
                root.manager.current = 'welcome'

<WelcomeScreen>:
    name: 'welcome'
    VertLayout:
        TopButton:
            text: "Retour A L'Accueil"
            on_press: root.manager.current = 'intro'
        Label:
            text: "Generateur d'Histoire!"
            font_size: 30
        Image:
            source: root.img_bkg
            allow_stretch: False
            keep_ratio: True
        VertLayout:
            CustButton:
                text: 'Choisir un Hero au Hasard'
                font_size: 30
                on_press: root.random_hero()
                on_release: app.root.open_story_screen_popup()
            CustButton:
                text: 'Choisir Mon Hero'
                font_size: 30
                on_release: app.root.new_hero()

<ScrollingScreen>:
    HorLayout:
        orientation: 'vertical'
        TopButton:
            text: "Retour A L'Accueil"
            on_press: root.manager.current = 'intro'
        HorLayout:
            orientation: 'horizontal'
            Label:
                text: "Hero"
                font_size: 30
            Label:
                text: "Ennemi"
                font_size: 30
        HorLayout:
            orientation: 'horizontal'
            Image:
                source: root.img_hero
                allow_stretch: False
                keep_ratio: True
            Image:
                source: root.img_villain
                allow_stretch: False
                keep_ratio: True
        HorLayout:
            orientation: 'horizontal'
            CustButton:
                size_hint: (.5, .5)
                text: 'OUI'
                on_release: app.root.open_story_screen_popup()
            CustButton:
                size_hint: (.5, .5)
                text: 'NON'
                on_release: app.root.new_hero()
            CustButton:
                size_hint: (.5, .5)
                text: 'Au Hasard'
                on_press: root.random_hero()
                on_release: app.root.open_story_screen_popup()

<StoryScreenPopUp>:
    title: " "
    VertLayout:
        TopButton:
            text: "Retour"
            on_press: root.dismiss()
        HorLayout:
            orientation: 'horizontal'
            Label:
                text: root.nom_hero
                font_size: 20
            Label:
                font_size: 20
            Label:
                text: root.nom_villain
                font_size: 20
        HorLayout:
            orientation: 'horizontal'
            Image:
                source: root.img_hero
                allow_stretch: False
                keep_ratio: True
            Image:
                source: root.img_vs
                allow_stretch: False
                keep_ratio: True
            Image:
                source: root.img_villain
                allow_stretch: False
                keep_ratio: True
        Label:
            text: "L'histoire se passe a "+root.nom_ville
            font_size: 30
        Label:
            text: "Et il y aura: "
            font_size: 30
        Label:
            text: root.contents
            font_size: 20
        CustButton:
            text: "Commencer l'histoire"
            on_press: root.open_begin_story_popup()

<BeginStoryPopUp>:
    title: " "
    VertLayout:
        TopButton:
            text: "Retour"
            on_press: root.dismiss()
        Label:
            text: "Debut de l'histoire..."
            font_size: 30
        ScrollView:
            size_hint: 1, 1
            TextInput:
                font_size:20
                height: self.minimum_height
                color: 1,1,1,.5
                size_hint_y: None
                readonly: True
                text: root.beginning
        CustButton:
            text: "Quitter"
            on_press: app.stop()

